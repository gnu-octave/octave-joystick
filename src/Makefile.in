OCT := __joystick__.oct
OBJ := joystick.o joystick_object.o pkglock.o
LFLAGS = $(LIBS) @SDL_LIBS@
CFLAGS  = $(CXXFLAGS) $(CPPFLAGS) @SDL_CFLAGS@ @DEFS@

OCTAVE_CONFIG ?= octave-config
MKOCTFILE ?= mkoctfile 
GREP ?= /usr/bin/grep
RM ?= rm -f

all: $(OCT)

%.o: %.c
	$(MKOCTFILE) $(CFLAGS) -c $^
	
%.o: %.cc
	$(MKOCTFILE) $(CFLAGS) -c $^

%.oct: $(OBJ)
	$(MKOCTFILE) $^ $(LFLAGS) $(TCPLIBS) -o $@

clean:
	-$(RM) $(OCT) *.o

distclean: clean
	-$(RM) autom4te.cache
	-$(RM) oct-alt-includes.h
	-$(RM) config.h config.log config.status
	-$(RM) Makefile

extraclean: distclean
	-$(RM) configure
	-$(RM) config.h.in
	-$(RM) aclocal.m4

.PHONY: all clean
